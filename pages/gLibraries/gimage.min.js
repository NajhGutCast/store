class gImage{static blobToBase64=async(t,e=()=>{})=>new Promise((a,l)=>{let i=new FileReader;i.onloadend=()=>{e(i.result),a(i.result)},i.readAsDataURL(t)});static compress=async({blob:t,full_length:e=1e3,mini_length:a=100,callback:l=()=>{}})=>{let i=!0,s=t.type,n=null,o=null,c=null;try{let r=await this.blobToBase64(t),h=new Image;h.src=r,h.style.objectFit="cover",h.style.objectPosition="center center",await h.onload;let d=0,w=0,g=e;h.width>=h.height?(d=(h.width-h.height)/2,g=h.height):(w=(h.height-h.width)/2,g=h.width);let $=document.createElement("canvas");$.width=e,$.height=e,$.style.objectFit="cover",$.style.objectPosition="center center";$.getContext("2d").drawImage(h,d,w,g,g,0,0,e,e),n=$.toDataURL(s).split(",")[1];let y=document.createElement("canvas");y.width=a,y.height=a;y.getContext("2d").drawImage(h,d,w,g,g,0,0,a,a),o=y.toDataURL(s).split(",")[1],c=r.split(",")[1]}catch(b){console.error(b),alert(b),i=!1}finally{return l({ok:i,image_type:s,image_full:n,image_mini:o,image_real:c}),{ok:i,image_type:s,image_full:n,image_mini:o,image_real:c}}}}